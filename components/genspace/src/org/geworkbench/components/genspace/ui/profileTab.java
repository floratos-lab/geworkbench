package org.geworkbench.components.genspace.ui;

import javax.swing.*;

import org.geworkbench.components.genspace.GenSpace;
import org.geworkbench.components.genspace.GenSpaceServerFactory;
import org.geworkbench.components.genspace.server.stubs.User;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 * Created by IntelliJ IDEA. User: jon Date: Aug 28, 2010 Time: 12:08:45 PM To
 * change this template use File | Settings | File Templates.
 */
public class profileTab extends SocialTab {
	private JTextField myNameTextField1;
	private JTextArea myResearchInterestsTextArea;
	private JTextField myLabTextField;
	private JTextField myNameTextField2;
	private JButton saveButton;
	private JTextField emailAddressTextField;
	private JTextField phoneTextField;
	private JTextField addressTextField;
	private JTextField address2TextField;
	private JTextField cityTextField;
	private JTextField stateTextField;
	private JTextField postalCodeTextField;
	protected JTextField jobTitleTextField;


	{
		// GUI initializer generated by IntelliJ IDEA GUI Designer
		// >>> IMPORTANT!! <<<
		// DO NOT EDIT OR ADD ANY CODE HERE!
		$$$setupUI$$$();
		initListeners();
	}

	/**
	 * Method generated by IntelliJ IDEA GUI Designer >>> IMPORTANT!! <<< DO NOT
	 * edit this method OR call it in your code!
	 * 
	 * @noinspection ALL
	 */
	private void $$$setupUI$$$() {
		panel1 = new JPanel();
		panel1.setLayout(new com.intellij.uiDesigner.core.GridLayoutManager(11,
				5, new Insets(0, 0, 0, 0), -1, -1));
		final JLabel label1 = new JLabel();
		label1.setText("My Research Interests:");
		panel1.add(label1, new com.intellij.uiDesigner.core.GridConstraints(8,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_NORTHWEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		final JLabel label2 = new JLabel();
		label2.setText("My Lab:");
		panel1.add(label2, new com.intellij.uiDesigner.core.GridConstraints(1,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		final JLabel label3 = new JLabel();
		label3.setText("My Name:");
		panel1.add(label3, new com.intellij.uiDesigner.core.GridConstraints(0,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		myNameTextField1 = new JTextField();
		panel1.add(
				myNameTextField1,
				new com.intellij.uiDesigner.core.GridConstraints(
						0,
						1,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(120, 28), null, 0, false));
		myResearchInterestsTextArea = new JTextArea();
		panel1.add(
				myResearchInterestsTextArea,
				new com.intellij.uiDesigner.core.GridConstraints(
						8,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER,
						com.intellij.uiDesigner.core.GridConstraints.FILL_BOTH,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						null, new Dimension(150, 50), null, 0, false));
		myNameTextField2 = new JTextField();
		panel1.add(
				myNameTextField2,
				new com.intellij.uiDesigner.core.GridConstraints(
						0,
						2,
						1,
						2,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(104, 28), null, 0, false));
		final com.intellij.uiDesigner.core.Spacer spacer1 = new com.intellij.uiDesigner.core.Spacer();
		panel1.add(
				spacer1,
				new com.intellij.uiDesigner.core.GridConstraints(
						8,
						4,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						1, null, null, null, 0, false));
		saveButton = new JButton();
		saveButton.setText("Save");
		panel1.add(
				saveButton,
				new com.intellij.uiDesigner.core.GridConstraints(
						9,
						3,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_CAN_SHRINK
								| com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_CAN_GROW,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(104, 29), null, 0, false));
		final com.intellij.uiDesigner.core.Spacer spacer2 = new com.intellij.uiDesigner.core.Spacer();
		panel1.add(
				spacer2,
				new com.intellij.uiDesigner.core.GridConstraints(
						10,
						3,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_CENTER,
						com.intellij.uiDesigner.core.GridConstraints.FILL_VERTICAL,
						1,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						null, new Dimension(104, 14), null, 0, false));
		myLabTextField = new JTextField();
		panel1.add(
				myLabTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						1,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(150, -1), null, 0, false));
		final JLabel label4 = new JLabel();
		label4.setText("Email Address:");
		panel1.add(label4, new com.intellij.uiDesigner.core.GridConstraints(3,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		final JLabel label5 = new JLabel();
		label5.setText("Phone:");
		panel1.add(label5, new com.intellij.uiDesigner.core.GridConstraints(4,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		final JLabel label6 = new JLabel();
		label6.setText("Address:");
		panel1.add(label6, new com.intellij.uiDesigner.core.GridConstraints(5,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		emailAddressTextField = new JTextField();
		panel1.add(
				emailAddressTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						3,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(150, -1), null, 0, false));
		phoneTextField = new JTextField();
		panel1.add(
				phoneTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						4,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(150, -1), null, 0, false));
		addressTextField = new JTextField();
		panel1.add(
				addressTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						5,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(150, -1), null, 0, false));
		address2TextField = new JTextField();
		panel1.add(
				address2TextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						6,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(150, -1), null, 0, false));
		final JLabel label7 = new JLabel();
		label7.setText("City, State, Postal Code:");
		panel1.add(label7, new com.intellij.uiDesigner.core.GridConstraints(7,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		cityTextField = new JTextField();
		panel1.add(
				cityTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						7,
						1,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(120, 28), null, 0, false));
		stateTextField = new JTextField();
		panel1.add(
				stateTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						7,
						2,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(57, 28), null, 0, false));
		postalCodeTextField = new JTextField();
		panel1.add(
				postalCodeTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						7,
						3,
						1,
						1,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(104, 28), null, 0, false));
		final JLabel label8 = new JLabel();
		label8.setText("Job Title:");
		panel1.add(label8, new com.intellij.uiDesigner.core.GridConstraints(2,
				0, 1, 1,
				com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
				com.intellij.uiDesigner.core.GridConstraints.FILL_NONE,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
				null, null, null, 0, false));
		jobTitleTextField = new JTextField();
		panel1.add(
				jobTitleTextField,
				new com.intellij.uiDesigner.core.GridConstraints(
						2,
						1,
						1,
						3,
						com.intellij.uiDesigner.core.GridConstraints.ANCHOR_WEST,
						com.intellij.uiDesigner.core.GridConstraints.FILL_HORIZONTAL,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_WANT_GROW,
						com.intellij.uiDesigner.core.GridConstraints.SIZEPOLICY_FIXED,
						null, new Dimension(150, -1), null, 0, false));
		label1.setLabelFor(myResearchInterestsTextArea);
		label2.setLabelFor(myLabTextField);
		label3.setLabelFor(myNameTextField1);
		label4.setLabelFor(emailAddressTextField);
		label5.setLabelFor(phoneTextField);
		label6.setLabelFor(addressTextField);
		label8.setLabelFor(jobTitleTextField);
	}

	private void initListeners() {
		saveButton.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				GenSpaceServerFactory.getUser().setFirstName(myNameTextField1.getText());
				GenSpaceServerFactory.getUser().setLastName(myNameTextField2.getText());
				GenSpaceServerFactory.getUser().setWorkTitle(jobTitleTextField.getText());
				GenSpaceServerFactory.getUser().setEmail(emailAddressTextField.getText());
				GenSpaceServerFactory.getUser().setPhone(phoneTextField.getText());
				GenSpaceServerFactory.getUser().setAddr1(addressTextField.getText());
				GenSpaceServerFactory.getUser().setAddr2(address2TextField.getText());
				GenSpaceServerFactory.getUser().setCity(cityTextField.getText());
				GenSpaceServerFactory.getUser().setState(stateTextField.getText());
				GenSpaceServerFactory.getUser().setZipcode(postalCodeTextField.getText());
				GenSpaceServerFactory.getUser().setLabAffiliation(myLabTextField.getText());
				GenSpaceServerFactory.getUser().setInterests(myResearchInterestsTextArea.getText());
				SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>()
				{
					int evt;
					
					@Override
					protected void done() {
						GenSpace.getStatusBar().stop(evt);
					}
					@Override
					protected Void doInBackground() throws Exception {
						evt = GenSpace.getStatusBar().start("Saving profile");
						GenSpaceServerFactory.userUpdate();
						return null;
					}
					
				};
				worker.execute();
			}
		});

	}

	public JComponent $$$getRootComponent$$$() {
		return panel1;
	}

	@Override
	public String getName() {
		return "My Profile";
	}

	@Override
	public void updateFormFields() {
		if (GenSpaceServerFactory.isLoggedIn()) {
			User u = GenSpaceServerFactory.getUser();
			myNameTextField1.setText(u.getFirstName());
			myNameTextField2.setText(u.getLastName());
			emailAddressTextField.setText(u.getEmail());
			phoneTextField.setText(u.getPhone());
			addressTextField.setText(u.getAddr1());
			address2TextField.setText(u.getAddr2());
			cityTextField.setText(u.getCity());
			stateTextField.setText(u.getState());
			postalCodeTextField.setText(u.getZipcode());
			myLabTextField.setText(u.getLabAffiliation());
			myResearchInterestsTextArea.setText(u.getInterests());
			jobTitleTextField.setText(u.getWorkTitle());
		}
	}
}
